CREATE TABLE STREET_NUMBERS (
    STREET_NUMBER_ID SERIAL PRIMARY KEY,
    STREET_NUMBER VARCHAR(12) NOT NULL DEFAULT 'N/A'
);

CREATE TABLE STREET_NAMES (
    STREET_NAME_ID SERIAL PRIMARY KEY,
    STREET_NAME VARCHAR NOT NULL DEFAULT 'N/A'
);

CREATE TABLE STREET_TYPES (
    STREET_TYPE_ID SERIAL PRIMARY KEY,
    STREET_TYPE VARCHAR NOT NULL DEFAULT 'N/A'
);

CREATE TABLE UNIT_TYPES (
    UNIT_TYPE_ID SERIAL PRIMARY KEY,
    UNIT_TYPE VARCHAR NOT NULL DEFAULT 'N/A'
);

CREATE TABLE UNIT_NUMBERS (
    UNIT_NUMBER_ID SERIAL PRIMARY KEY,
    UNIT_NUMBER VARCHAR NOT NULL DEFAULT 'N/A'
);


CREATE TABLE STREETS (
    STREET_ID SERIAL PRIMARY KEY,
    STREET_NUMBER_ID INT NOT NULL,
    STREET_NAME_ID INT NOT NULL,
    STREET_TYPE_ID INT NOT NULL,
    UNIT_TYPE_ID INT NOT NULL,
    UNIT_NUMBER_ID INT NOT NULL,
    UNIQUE(STREET_NUMBER_ID, STREET_NAME_ID, STREET_TYPE_ID, UNIT_TYPE_ID, UNIT_NUMBER_ID),
    FOREIGN KEY (STREET_NUMBER_ID) REFERENCES STREET_NUMBERS(STREET_NUMBER_ID),
    FOREIGN KEY (STREET_NAME_ID) REFERENCES STREET_NAMES(STREET_NAME_ID),
    FOREIGN KEY (STREET_TYPE_ID) REFERENCES STREET_TYPES(STREET_TYPE_ID),
    FOREIGN KEY (UNIT_TYPE_ID) REFERENCES UNIT_TYPES(UNIT_TYPE_ID),
    FOREIGN KEY (UNIT_NUMBER_ID) REFERENCES UNIT_NUMBERS(UNIT_NUMBER_ID)
);

CREATE TABLE CITIES (
    CITY_ID SERIAL PRIMARY KEY,
    CITY VARCHAR UNIQUE NOT NULL DEFAULT 'N/A'
);

CREATE TABLE STATES (
    STATE_ID SERIAL PRIMARY KEY,
    STATE CHAR(2) UNIQUE NOT NULL DEFAULT 'XX'
);

CREATE TABLE ZIP_CODES (
    ZIP_CODE_ID SERIAL PRIMARY KEY,
    CITY_ID INT NOT NULL,
    STATE_ID INT NOT NULL,
    ZIP_CODE VARCHAR(10) NOT NULL DEFAULT '00000',
    FOREIGN KEY (CITY_ID) REFERENCES CITIES(CITY_ID),
    FOREIGN KEY (STATE_ID) REFERENCES STATES(STATE_ID),
    UNIQUE(CITY_ID, STATE_ID, ZIP_CODE),
    CHECK((ZIP_CODE ~ '^\d{5}$') OR (ZIP_CODE ~ '^\d{5}-\d{4}$'))
);

CREATE TABLE ADDRESSES (
    ADDRESS_ID SERIAL PRIMARY KEY,
    STREET_ID INT NOT NULL,
    ZIP_CODE_ID INT NOT NULL,
    FOREIGN KEY (STREET_ID) REFERENCES STREETS(STREET_ID),
    FOREIGN KEY (ZIP_CODE_ID) REFERENCES ZIP_CODES(ZIP_CODE_ID),
    UNIQUE(STREET_ID, ZIP_CODE_ID)
);

CREATE TABLE FIRST_NAMES (
    FIRST_NAME_ID SERIAL PRIMARY KEY,
    FIRST_NAME VARCHAR UNIQUE NOT NULL DEFAULT 'N/A'
);

CREATE TABLE LAST_NAMES (
    LAST_NAME_ID SERIAL PRIMARY KEY,
    LAST_NAME VARCHAR UNIQUE NOT NULL DEFAULT 'N/A'
);

CREATE TABLE DESCRIPTIONS (
    DESCRIPTION_ID SERIAL PRIMARY KEY,
    DESCRIPTION VARCHAR UNIQUE NOT NULL DEFAULT 'N/A'
);

CREATE TABLE AREA_CODES (
    AREA_CODE_ID SERIAL PRIMARY KEY,
    AREA_CODE VARCHAR(3) UNIQUE NOT NULL DEFAULT 'N/A',
    CHECK (AREA_CODE = 'N/A' OR (AREA_CODE ~ '^[0-9]{3}$'))
);

CREATE TABLE EXCHANGE_CODES (
    EXCHANGE_CODE_ID SERIAL PRIMARY KEY,
    EXCHANGE_CODE VARCHAR(3) UNIQUE NOT NULL DEFAULT 'N/A',
    CHECK (EXCHANGE_CODE = 'N/A' OR (EXCHANGE_CODE ~ '^[0-9]{3}$'))
);

CREATE TABLE SUBSCRIBE_NUMBERS (
    SUBSCRIBE_NUMBER_ID SERIAL PRIMARY KEY,
    SUBSCRIBE_NUMBER VARCHAR(4) UNIQUE NOT NULL DEFAULT 'N/A',
    CHECK (SUBSCRIBE_NUMBER = 'N/A' OR (SUBSCRIBE_NUMBER ~ '^[0-9]{4}$'))
);
CREATE TABLE PHONE_NUMBERS(
    PHONE_NUMBER_ID SERIAL PRIMARY KEY,
    AREA_CODE_ID INT NOT NULL,
    EXCHANGE_CODE_ID INT NOT NULL,
    SUBSCRIBE_NUMBER_ID INT NOT NULL,
    UNIQUE(AREA_CODE_ID, EXCHANGE_CODE_ID, SUBSCRIBE_NUMBER_ID),
    FOREIGN KEY (AREA_CODE_ID) REFERENCES AREA_CODES(AREA_CODE_ID),
    FOREIGN KEY (EXCHANGE_CODE_ID) REFERENCES EXCHANGE_CODES(EXCHANGE_CODE_ID),
    FOREIGN KEY (SUBSCRIBE_NUMBER_ID) REFERENCES SUBSCRIBE_NUMBERS(SUBSCRIBE_NUMBER_ID)
);

--- INSERT "NULL" VALUES FIRST AS ITS OWN COLUMN TO BE REFERENCED AS 1 FOR ALL IDs (not UUID).
INSERT INTO STREET_NUMBERS DEFAULT VALUES;

INSERT INTO STREET_NAMES DEFAULT VALUES;

INSERT INTO STREET_TYPES DEFAULT VALUES;

INSERT INTO UNIT_TYPES DEFAULT VALUES;

INSERT INTO UNIT_NUMBERS DEFAULT VALUES;

INSERT INTO STREETS(STREET_NUMBER_ID, STREET_NAME_ID, STREET_TYPE_ID, UNIT_TYPE_ID, UNIT_NUMBER_ID)
VALUES (1, 1, 1, 1, 1);

INSERT INTO CITIES DEFAULT VALUES;

INSERT INTO STATES DEFAULT VALUES;

INSERT INTO ZIP_CODES (CITY_ID, STATE_ID, ZIP_CODE)
VALUES (1, 1, DEFAULT);

INSERT INTO ADDRESSES (STREET_ID, ZIP_CODE_ID)
VALUES (1, 1);

INSERT INTO FIRST_NAMES DEFAULT VALUES;

INSERT INTO LAST_NAMES DEFAULT VALUES;

INSERT INTO DESCRIPTIONS DEFAULT VALUES;

INSERT INTO AREA_CODES DEFAULT VALUES;

INSERT INTO EXCHANGE_CODES DEFAULT VALUES;

INSERT INTO SUBSCRIBE_NUMBERS DEFAULT VALUES;

INSERT INTO PHONE_NUMBERS (AREA_CODE_ID, EXCHANGE_CODE_ID, SUBSCRIBE_NUMBER_ID)
VALUES (1, 1, 1);

--- END COMMENT
CREATE TABLE IF NOT EXISTS MEDICAL_PROVIDERS (
    MEDICAL_PROVIDER_UUID UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    FIRST_NAME_ID INT NOT NULL,
    LAST_NAME_ID INT NOT NULL,
    DESCRIPTION_ID INT NOT NULL,
    PHONE_NUMBER_ID INT NOT NULL,
    PRIMARY_ADDRESS_ID INT NOT NULL,
    SECONDARY_ADDRESS_ID INT NOT NULL DEFAULT 1,
    FOREIGN KEY (FIRST_NAME_ID) REFERENCES FIRST_NAMES(FIRST_NAME_ID),
    FOREIGN KEY (LAST_NAME_ID) REFERENCES LAST_NAMES(LAST_NAME_ID),
    FOREIGN KEY (DESCRIPTION_ID) REFERENCES DESCRIPTIONS(DESCRIPTION_ID),
    FOREIGN KEY (PHONE_NUMBER_ID) REFERENCES PHONE_NUMBERS(PHONE_NUMBER_ID),
    FOREIGN KEY (PRIMARY_ADDRESS_ID) REFERENCES ADDRESSES(ADDRESS_ID),
    FOREIGN KEY (SECONDARY_ADDRESS_ID) REFERENCES ADDRESSES(ADDRESS_ID)
);

--- TEST EXAMPLE
INSERT INTO STREET_NUMBERS(STREET_NUMBER)
VALUES('123');

INSERT INTO STREET_NAMES(STREET_NAME)
VALUES('Main');

INSERT INTO STREET_TYPES(STREET_TYPE)
VALUES('St');

INSERT INTO STREETS (STREET_NUMBER_ID, STREET_NAME_ID, STREET_TYPE_ID, UNIT_TYPE_ID, UNIT_NUMBER_ID)
VALUES (2, 2, 2, 1, 1);

INSERT INTO CITIES (CITY)
VALUES ('Springfield');
INSERT INTO CITIES (CITY)
VALUES ('Chicago');
INSERT INTO STATES (STATE)
VALUES ('IL');

INSERT INTO ZIP_CODES (CITY_ID, STATE_ID, ZIP_CODE)
VALUES (2, 2, 62701);
INSERT INTO ZIP_CODES (CITY_ID, STATE_ID, ZIP_CODE)
VALUES (2, 2, 62704);

INSERT INTO ADDRESSES (STREET_ID, ZIP_CODE_ID)
VALUES (2, 2);

INSERT INTO FIRST_NAMES (FIRST_NAME)
VALUES ('John');

INSERT INTO LAST_NAMES (LAST_NAME)
VALUES ('Smith');

INSERT INTO DESCRIPTIONS (DESCRIPTION)
VALUES ('Cardiologist');

INSERT INTO AREA_CODES (AREA_CODE)
VALUES (555);

INSERT INTO EXCHANGE_CODES (EXCHANGE_CODE)
VALUES (123);

INSERT INTO SUBSCRIBE_NUMBERS (SUBSCRIBE_NUMBER)
VALUES (4567);

INSERT INTO PHONE_NUMBERS (AREA_CODE_ID, EXCHANGE_CODE_ID, SUBSCRIBE_NUMBER_ID)
VALUES (2, 2, 2);

INSERT INTO MEDICAL_PROVIDERS (
    FIRST_NAME_ID, 
    LAST_NAME_ID, 
    DESCRIPTION_ID, 
    PHONE_NUMBER_ID, 
    PRIMARY_ADDRESS_ID
) VALUES (
    2, 2, 2, 2, 2
);
--- END TEST